/* ==========================================================================
Global Meltdown â€“ Nuclear Cascade Slot
Production CSS: cinematic CRT cabinet + GPU tumble/explosion animations
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/* ---------- Theme tokens ---------- */
.root {
  --crt-green: #c8ffe8;
  --crt-accent: rgba(0,255,170,0.22);
  --crt-accent-strong: rgba(0,255,170,0.45);
  --nuke-glow: #00ffb0;
  --nuke-core: #7bffd4;
  --nuke-warn: #ffd68a;
  --shadow-deep: rgba(0,0,0,.55);
  --cell: 86px;
  --gap: 10px;
  --hud-h: 86px;
}

/* â€¦ keep header/cabinet/frameGlow/crtOverlay/wildBanner/etc unchanged â€¦ */

/* ---------- Screen + Grid (responsive, fills viewport) ---------- */
.screen {
  height: calc(100svh - 140px);            /* adjust offset to header/HUD */
  max-height: 100svh;
  aspect-ratio: calc(var(--cols) / var(--rows));
  width: min(100vw, calc((100svh - 140px) * (var(--cols) / var(--rows))));
  position: relative;
  margin-inline: auto;
  overflow: hidden;
  border-radius: 20px;
  border: 1px solid var(--bezel, rgba(38,255,136,.32));
  background:
    radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.04), rgba(0,0,0,.55)),
    linear-gradient(180deg, rgba(20,20,20,.55), rgba(0,0,0,.82));
}

.grid {
  --gap: clamp(6px, 1.2vmin, 12px);
  position: absolute;
  inset: clamp(8px, 1.2vmin, 14px);
  display: grid;
  grid-template-columns: repeat(var(--cols), 1fr);
  grid-auto-rows: 1fr;
  gap: var(--gap);
}

.cell {
  border-radius: clamp(8px, 1.2vmin, 12px);
  border: 1px solid rgba(0,255,136,.35);
  background: linear-gradient(180deg, rgba(0,255,136,.10), rgba(0,0,0,.35));
  display: grid;
  place-items: center;
  font-weight: 800;
  color: #a9ffd1;
  box-shadow: inset 0 0 0.8vmin rgba(0,255,136,.18);
}
.glyph {
  font-size: clamp(16px, 5.5vmin, 42px);
  line-height: 1;
  pointer-events: none;
}

/* FX layers cover the screen area */
.fxCanvas, .crtOverlay {
  position: absolute;
  inset: clamp(8px, 1.2vmin, 14px);
}

/* ---------- Page shell & header ---------- */
.shell {
display: grid;
gap: 18px;
justify-items: center;
padding: 26px;
color: var(--crt-green);
background:
radial-gradient(120% 80% at 50% 0%, #072b1d 0%, #04130e 45%, #020907 100%),
repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 1px, transparent 1px 2px);
border-radius: 22px;
box-shadow: inset 0 0 60px rgba(0,255,170,.06), 0 0 90px rgba(0,0,0,.7);
position: relative;
isolation: isolate;
}
.header { text-align: center; text-shadow: 0 0 12px rgba(0,255,160,.28); z-index: 1; }
.title { font-weight: 900; letter-spacing: 2px; font-size: 2.4rem; }
.title span { margin-right: 10px; }
.meta { opacity: .88; font-size: .98rem; }

/* ---------- Cabinet & Screen ---------- */
.cabinet { position: relative; display: grid; gap: 14px; justify-items: center; }
.frameGlow {
position: absolute; inset: -22px -22px 60px -22px;
background: radial-gradient(55% 45% at 50% 40%, rgba(0,255,160,.14) 0%, rgba(0,0,0,0) 70%);
filter: blur(22px); pointer-events: none;
}
.screen {
position: relative; overflow: hidden; border-radius: 20px;
padding: 18px 18px calc(var(--hud-h) + 18px) 18px; /* space for HUD */
background: linear-gradient(180deg, rgba(0,25,20,.92) 0%, rgba(0,18,14,.98) 100%);
outline: 1px solid var(--crt-accent);
box-shadow:
inset 0 0 0 1px rgba(0,255,160,.28),
0 26px 70px var(--shadow-deep),
inset 0 -160px 160px rgba(0,255,130,.03);
}

/* ---------- CRT Overlays (scanlines + vignette + chroma fringe) ---------- */
.crtOverlay {
pointer-events: none; position: absolute; inset: 0; z-index: 1;
background:
repeating-linear-gradient(to bottom, rgba(0,0,0,.22) 0 1px, transparent 2px 4px),
radial-gradient(120% 90% at 50% 0%, rgba(0,0,0,.25), rgba(0,0,0,.65));
mix-blend-mode: multiply; opacity: .46;
animation: scanFlicker 6s linear infinite;
}
.crtOverlay::after {
content: ""; position: absolute; inset: -1px;
background: linear-gradient(90deg, transparent 0%, rgba(0,255,200,.07) 30%, rgba(255,60,60,.07) 70%, transparent 100%);
mix-blend-mode: screen; pointer-events: none;
}

/* Subtle rolling scan flicker */
@keyframes scanFlicker {
0% { filter: brightness(1) contrast(1); }
50% { filter: brightness(1.02) contrast(1.02); }
100% { filter: brightness(1) contrast(1); }
}

/* ---------- Wild / Reactor Banners ---------- */
.wildBanner {
position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
display: inline-grid; grid-auto-flow: column; gap: 10px; align-items: center;
padding: 9px 14px; border-radius: 12px;
background: rgba(0,255,160,.10);
outline: 1px solid rgba(0,255,170,.32);
z-index: 4;
animation: wildPulse 1.6s ease-in-out infinite;
backdrop-filter: blur(2px);
}
@keyframes wildPulse {
0%,100% { box-shadow: 0 0 0 rgba(0,255,170,0); }
50% { box-shadow: 0 0 26px rgba(0,255,170,.26); }
}
.wildIcon { filter: drop-shadow(0 0 7px rgba(0,255,170,.5)); }
.wildText { font-weight: 800; letter-spacing: .6px; }
.wildName { color: #eafff6; text-shadow: 0 0 10px rgba(0,255,170,.4); }

/* ---------- Grid Layout ---------- */
.grid {
position: relative;
display: grid;
grid-template-rows: repeat(6, var(--cell));
gap: var(--gap);
z-index: 2; /* above CRT overlay base but below HUD */
width: calc(var(--cell) * 5 + var(--gap) * 4);
margin-inline: auto;
}
.row {
display: grid;
grid-template-columns: repeat(5, var(--cell));
gap: var(--gap);
}
.cell {
width: var(--cell); height: var(--cell);
border-radius: 16px; display: grid; place-items: center;
background: radial-gradient(100% 100% at 50% 32%, #061b14 0%, #03120d 58%, #020c09 100%);
outline: 1px solid rgba(0,255,170,.18);
box-shadow: inset 0 -14px 26px rgba(0,255,140,.07), 0 4px 12px rgba(0,0,0,.42);
position: relative; overflow: hidden;
will-change: transform, opacity; transform: translateZ(0); contain: content;
}

/* ---------- Symbol Icon (SVG sprite via background-image) ---------- */
.icon {
position: relative;
width: 72%; height: 72%;
display: block;
background-repeat: no-repeat;
background-position: center;
background-size: contain;
filter: drop-shadow(0 2px 3px rgba(0,0,0,.5));
}

/* ---------- Drop / Tumble Animations ---------- */
.drop { animation: dropIn 520ms cubic-bezier(.2,.9,.15,1) both; }
@keyframes dropIn {
0% { transform: translate3d(0,-165%,0) scale(.92); opacity: 0; }
75% { transform: translate3d(0, 7%,0) scale(1.02); opacity: 1; }
100% { transform: translate3d(0, 0,0) scale(1); }
}

/* optional micro-shake on big refill batches */
.shake { animation: shakeXY 220ms ease-out; }
@keyframes shakeXY {
0%,100% { transform: translate3d(0,0,0); }
25% { transform: translate3d( 1px,-1px,0); }
50% { transform: translate3d(-1px, 1px,0); }
75% { transform: translate3d( 1px, 1px,0); }
}

/* ---------- Explosions (GPU-friendly) ---------- */
.explode { animation: popOut 580ms cubic-bezier(.2,.85,.2,1) forwards; }
.explode::before {
content: ""; position: absolute; inset: 0;
background:
radial-gradient(60% 60% at 50% 50%, rgba(0,255,170,.55), rgba(0,255,170,0) 65%),
radial-gradient(30% 30% at 50% 50%, rgba(255,255,255,.75), rgba(255,255,255,0));
mix-blend-mode: screen; filter: blur(4px); animation: flash 260ms ease-out;
}
@keyframes flash { from { opacity: 1; } to { opacity: 0; } }
@keyframes popOut { 0% { transform: scale(1); opacity: 1; }
35%{ transform: scale(1.24); opacity: 1; }
100%{transform: scale(.60); opacity: 0; } }

/* ---------- Boosted (Nuclear Wild double-count) ---------- */
.boosted {
outline-color: rgba(0,255,210,.38);
box-shadow: inset 0 -14px 28px rgba(0,255,220,.10), 0 0 22px rgba(0,255,210,.22);
}

/* ---------- Bonus Reactor (ðŸ”†) ---------- */
.reactor {
outline-color: rgba(255,255,140,.45);
box-shadow: inset 0 -14px 28px rgba(255,255,150,.18), 0 0 20px rgba(255,255,170,.28);
position: relative;
}
.reactor::after {
content: ""; position: absolute; inset: 0;
background: radial-gradient(45% 45% at 50% 50%, rgba(255,255,180,.50), rgba(255,255,180,0));
mix-blend-mode: screen; animation: reactorPulse 1.25s ease-in-out infinite; pointer-events: none;
}
@keyframes reactorPulse { 0%,100% { opacity: .35; filter: blur(3px); }
50% { opacity: .70; filter: blur(5px); } }

/* ---------- Canvas FX layer (for bursts/particles) ---------- */
.fxCanvas {
position: absolute; inset: 0; pointer-events: none; z-index: 3;
}

/* ---------- HUD (Cascades / Last / Total / Multiplier) ---------- */
.hud {
position: absolute; left: 0; right: 0; bottom: 0; height: var(--hud-h); z-index: 4;
display: grid; grid-template-columns: 120px 160px 160px 1fr;
gap: 12px; padding: 10px 14px;
background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,25,16,.88));
border-top: 1px solid rgba(0,255,160,.18);
backdrop-filter: blur(1px);
}
.stat { display: grid; align-content: center; justify-items: center; color: #c7ffe9; }
.stat label { font-size: .72rem; text-transform: uppercase; letter-spacing: 1px; opacity: .8; }
.statVal { font-variant-numeric: tabular-nums; font-weight: 900; margin-top: 3px; }

/* Multiplier meter */
.multWrap { display: grid; align-content: center; row-gap: 6px; padding-right: 6px; }
.multLabel { font-size: .72rem; letter-spacing: 1px; opacity: .85; text-align: right; }
.multBar {
position: relative; width: 100%; height: 30px; border-radius: 12px; overflow: hidden;
background: rgba(0,255,140,.07); outline: 1px solid rgba(0,255,150,.22);
}
.multFill {
position: absolute; left: 0; top: 0; bottom: 0;
background: linear-gradient(90deg, rgba(0,255,160,.35), rgba(0,255,200,.62));
box-shadow: 0 0 24px rgba(0,255,190,.35);
transition: width .25s ease;
}
.multText {
position: absolute; inset: 0; display: grid; place-items: center;
font-weight: 900; text-shadow: 0 0 10px rgba(0,255,170,.4);
}

/* Multiplier pill milestones */
.pillStack { display: grid; grid-auto-flow: column; gap: 8px; justify-content: end; }
.pill {
padding: 5px 10px; border-radius: 999px; font-weight: 900; letter-spacing: .6px;
background: rgba(0,255,150,.08); outline: 1px solid rgba(0,255,150,.20); opacity: .7;
}
.pillActive { opacity: 1; background: rgba(0,255,170,.22); outline-color: rgba(0,255,190,.48);
box-shadow: 0 0 18px rgba(0,255,170,.24); animation: pillPop .25s ease; }
@keyframes pillPop { from { transform: scale(.9); } to { transform: scale(1); } }

/* ---------- Buttons ---------- */
.spinBtn {
margin-top: 10px; padding: 12px 24px; border: 0; border-radius: 14px; cursor: pointer;
font-weight: 900; letter-spacing: 1px; color: #d9ffee;
background: linear-gradient(135deg, rgba(0,255,170,.12), rgba(0,255,140,.28));
box-shadow: 0 6px 20px rgba(0,255,160,.15), inset 0 0 0 1px rgba(0,255,170,.25);
transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
filter: saturate(1.15);
}
.spinBtn:hover:not([disabled]) { transform: translateY(-1px); box-shadow: 0 10px 28px rgba(0,255,160,.22), inset 0 0 0 1px rgba(0,255,170,.35); }
.spinBtn[disabled] { opacity: .6; cursor: default; }

/* ---------- Paytable / Info Panel ---------- */
.paytable {
width: 100%; max-width: 760px; border-radius: 16px;
border: 1px solid rgba(0,255,150,.20); padding: 14px;
background: linear-gradient(180deg, rgba(0,25,16,.68), rgba(0,18,12,.92));
}
.payheader { font-weight: 900; letter-spacing: 1.1px; margin-bottom: 8px; opacity: .92; }
.payRow {
display: grid; grid-template-columns: 54px 1fr auto auto; align-items: center;
gap: 12px; padding: 8px 10px; border-radius: 12px; background: rgba(0,255,160,.07); margin-bottom: 8px;
}
.payGlyph { width: 36px; height: 36px; }
.payName { font-weight: 800; }
.payBase { opacity: .88; font-variant-numeric: tabular-nums; }
.payRule { opacity: .75; font-size: .92rem; }

/* ---------- SVG Sprite Symbols (icon backgrounds) ---------- */
/* Biohazard */
.sym-biohazard { background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g fill='none' stroke='%23a6ffda' stroke-width='2'>\
<circle cx='32' cy='32' r='5' fill='%2300ffc2'/>\
<path d='M32 10c6 8-2 12-2 22m2-22c-6 8 2 12 2 22'/>\
<path d='M14 24c10-1 12 7 22 7m-22-7c10 1 12 9 22 9'/>\
<path d='M50 24c-10-1-12 7-22 7m22-7c-10 1-12 9-22 9'/></g></svg>"); }
/* Radioactive */
.sym-radioactive { background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g fill='%2300ffc2' stroke='%2300e6b0' stroke-width='2'>\
<circle cx='32' cy='32' r='6'/><path d='M32 8a24 24 0 0 1 21 12l-18 10z'/><path d='M11 20A24 24 0 0 1 32 8v22z'/>\
<path d='M32 54a24 24 0 0 1-21-12l18-10z'/><path d='M53 44A24 24 0 0 1 32 54V32z'/></g></svg>"); }
/* Gas Mask */
.sym-gasMask { background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g fill='none' stroke='%23a6ffda' stroke-width='2'>\
<circle cx='24' cy='28' r='8' fill='rgba(0,255,180,.15)'/><circle cx='40' cy='28' r='8' fill='rgba(0,255,180,.15)'/>\
<rect x='26' y='36' width='12' height='10' rx='3' fill='%2300ffc2'/><circle cx='22' cy='46' r='5' fill='rgba(0,255,170,.25)'/>\
<circle cx='42' cy='46' r='5' fill='rgba(0,255,170,.25)'/></g></svg>"); }
/* Explosion glyph (bonus symbol in set) */
.sym-explosion { background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g fill='%2300ffc2' stroke='%2300e6b0' stroke-width='2'>\
<polygon points='32,6 38,18 52,18 40,26 44,38 32,30 20,38 24,26 12,18 26,18'/></g></svg>"); }
/* Skull */
.sym-skull { background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g fill='none' stroke='%23a6ffda' stroke-width='2'>\
<path d='M20 40v8h24v-8'/><path d='M12 26c0-10 9-18 20-18s20 8 20 18c0 8-6 12-12 14H24C18 38 12 34 12 26z' fill='rgba(0,255,170,.08)'/>\
<circle cx='24' cy='26' r='5'/><circle cx='40' cy='26' r='5'/></g></svg>"); }
/* Diamond (reactor core) */
.sym-diamond { background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g fill='none' stroke='%2300e6b0' stroke-width='2'>\
<polygon points='32,6 54,26 32,58 10,26' fill='rgba(0,255,180,.1)'/><path d='M10 26h44'/></g></svg>"); }

/* ---------- Responsive ---------- */
@media (max-width: 640px) {
.root { --cell: 68px; --gap: 8px; --hud-h: 92px; }
.hud { grid-template-columns: 1fr 1fr; height: auto; row-gap: 8px; }
.multWrap { grid-column: span 2; }
}

/* ---------- Reduced Motion Accessibility ---------- */
@media (prefers-reduced-motion: reduce) {
.drop, .explode, .shake, .wildBanner, .crtOverlay, .pillActive { animation: none !important; }
.multFill { transition: none !important; }
}

/* ---------- Performance Hints ---------- */
.cell, .icon, .multFill, .wildBanner, .crtOverlay { will-change: transform, opacity; }

/* ===== HARD LAYOUT GUARD (pin to 5Ã—6) ===== */
.screen {
/* exact width for 5 columns + 4 gaps + cabinet padding */
width: clamp(
540px,
92vw,
calc(var(--cell) * 5 + var(--gap) * 4 + 36px)
);
margin: 0 auto;
}

/* force grid to be exactly 5 columns wide */
.grid {
width: calc(var(--cell) * 5 + var(--gap) * 4) !important;
margin-inline: auto;
}

/* each row = 5 fixed columns, no wrapping */
.row {
display: grid !important;
grid-template-columns: repeat(5, var(--cell)) !important;
gap: var(--gap) !important;
}

/* tile insurance (prevents auto-stretch) */
.cell {
width: var(--cell) !important;
height: var(--cell) !important;
min-width: var(--cell) !important;
min-height: var(--cell) !important;
}

/* mobile fallback still stays 5 cols (smaller tiles) */
@media (max-width: 640px) {
.root { --cell: 64px; --gap: 8px; }
.screen {
width: clamp(
360px,
98vw,
calc(var(--cell) * 5 + var(--gap) * 4 + 24px)
);
}
.grid {
width: calc(var(--cell) * 5 + var(--gap) * 4) !important;
}
}

/* Grid + cell essentials to avoid the single-column bug */
.grid {
display: grid;
gap: 8px;
grid-auto-rows: 48px; /* matches .cell height */
}

/* If you ever keep row wrappers in JSX, this makes them layout-transparent */
/* .row { display: contents; } */

.cell {
height: 48px;
border-radius: 10px;
border: 1px solid rgba(0,255,136,.3);
background: linear-gradient(180deg, rgba(0,255,136,.1), rgba(0,0,0,.35));
display: grid;
place-items: center;
font-weight: 800;
color: #a9ffd1;
}
.glyph { pointer-events: none; }